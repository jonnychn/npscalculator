<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NPS Analytics Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Add to existing styles */
        .nps-range-meter {
            background: linear-gradient(90deg, 
                #e74c3c 0%, 
                #e74c3c 33%, 
                #f1c40f 33%, 
                #f1c40f 66%, 
                #2ecc71 66%, 
                #2ecc71 100%);
            height: 10px;
            border-radius: 5px;
            margin: 1rem 0;
            position: relative;
        }

        .nps-marker {
            position: absolute;
            top: -5px;
            width: 2px;
            height: 20px;
            background: var(--dark);
        }

        .score-interpretation {
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid;
        }

        .score-poor {
            background: #fdedec;
            border-color: #e74c3c;
        }

        .score-fair {
            background: #fcf4dd;
            border-color: #f1c40f;
        }

        .score-good {
            background: #e8f6f0;
            border-color: #2ecc71;
        }

        .score-excellent {
            background: #e8f6f0;
            border-color: #27ae60;
        }

        .range-legend {
            display: flex;
            justify-content: space-between;
            margin: 1rem 0;
            color: #7f8c8d;
        }
    </style>
</head>
<body>
    <!-- Add this inside the results card -->
    <div class="calculation-details">
        <h4><i class="fas fa-info-circle"></i> NPS Score Interpretation</h4>
        <div class="nps-range-meter">
            <div class="nps-marker" id="npsMarker" style="left: 50%"></div>
        </div>
        <div class="range-legend">
            <span>-100 (Poor)</span>
            <span>0</span>
            <span>30</span>
            <span>70</span>
            <span>100 (Excellent)</span>
        </div>
        <div id="scoreInterpretation" class="score-interpretation">
            <h4 id="interpretationTitle">Score Evaluation</h4>
            <p id="interpretationText" class="text-muted">Calculating score interpretation...</p>
        </div>
    </div>

    <script>
        // Add to calculateNPS function
        function calculateNPS(scores) {
            // ... existing code ...

            // Update score interpretation
            const interpretation = document.getElementById('scoreInterpretation');
            const interpretationTitle = document.getElementById('interpretationTitle');
            const interpretationText = document.getElementById('interpretationText');
            const npsMarker = document.getElementById('npsMarker');

            // Position marker (-100 to 100 mapped to 0-100% width)
            const markerPosition = ((parseFloat(nps) + 100) / 200) * 100;
            npsMarker.style.left = `${markerPosition}%`;

            // Remove all classes
            interpretation.className = 'score-interpretation';
            
            if (nps < 0) {
                interpretation.classList.add('score-poor');
                interpretationTitle.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Needs Improvement';
                interpretationText.textContent = "This score indicates significant customer dissatisfaction. Immediate action recommended to address critical issues.";
            } else if (nps >= 0 && nps < 30) {
                interpretation.classList.add('score-fair');
                interpretationTitle.innerHTML = '<i class="fas fa-check-circle"></i> Fair';
                interpretationText.textContent = "Average performance with room for improvement. Focus on converting passives to promoters and reducing detractors.";
            } else if (nps >= 30 && nps < 70) {
                interpretation.classList.add('score-good');
                interpretationTitle.innerHTML = '<i class="fas fa-thumbs-up"></i> Good';
                interpretationText.textContent = "Above average performance. Maintain strengths while identifying opportunities for improvement.";
            } else {
                interpretation.classList.add('score-excellent');
                interpretationTitle.innerHTML = '<i class="fas fa-award"></i> Excellent';
                interpretationText.textContent = "World-class customer loyalty! Continue nurturing relationships and maintaining high standards.";
            }

            // Add benchmark comparison
            interpretationText.innerHTML += `<br><small>Industry average NPS: 32 (Retail: 45, Tech: 35, Banking: 28)</small>`;
        }
    </script>
</body>
</html>
